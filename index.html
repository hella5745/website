<HTML>

<HEAD>

<TITLE>Randi</TITLE>
<link rel="icon" type="image/gif/png" href="1.png">
<script src="jquery-3.4.1.js"></script>
</HEAD>
 <header>
       <h1>Randi Website</h1>



<script type="text/javascript">var submitted=false;</script>
<iframe name="hidden_iframe" id="hidden_iframe" style="display:none;" 
onload="if(submitted) {alert('SENT!');location.reload(); document.getElementById('form').reset();}"></iframe>

<form id="form" action="https://docs.google.com/forms/d/e/1FAIpQLSe-M5uSl7e6LefOjmAhyXnBpBMQGvq6hj02ugduR4fKtMSwyw/formResponse" 
method="post" target="hidden_iframe" onsubmit="submitted=true;">

      <label>Name</label>
      <input type="text" value="anonymous"  name="entry.534602257" required autocomplete="off">
  
      <label>post</label>
      <input type="text" placeholder="post" name="entry.809782" required autocomplete="off">
   
     
    
    
      <button  type="submit" id= "sub">Send</button>
</form>
 </header>
<BODY>

<script>
var spreadUrl = 'https://spreadsheets.google.com/feeds/cells/1cHny66AB5OqBxdi0a9-Ubm1-E3O-dpT3YdhkjNvEAWA/1/public/values?alt=json-in-script&callback=doData';

function AddResponseTable(posttime,postname,postcontent ,tableid) {
    
    
  var txt1 = '<table id="table'+tableid+'"  style="width:100%" align="right"> <tr> <td><p>'+posttime+' '+postname+'</p></td> </tr> <tr> <td>'+postcontent+'</td> </tr> <tr> <td align="right">  </td> </tr> <tr> <td id= "insidetable'+tableid+'" align="right"> </td> </tr><tr><td><table style="width:100%" id="insidetable'+tableid+'"> </table></td></tr> </table>';              
  

$('BODY').prepend(txt1);
}
function doData(data) {

    var results = [];

    var entries = data.feed.entry;

    var previousRow = 0;

    for (var i = 0; i < entries.length; i++) {
        var latestRow = results[results.length - 1];

        var cell = entries[i];

        var text = cell.content.$t;

        var row = cell.gs$cell.row;

        if (row > previousRow) {
            var newRow = [];

            newRow.push(text);

            results.push(newRow);

            previousRow++;
        } else {
            latestRow.push(text);
        }
            

    }
        handleResults(results);

}

function handleResults(spreadsheetArray) {
    var i;
for (i = 1; i < spreadsheetArray.length; i++) {
  AddResponseTable(spreadsheetArray[i][0],spreadsheetArray[i][1],spreadsheetArray[i][2],i);
}

    


}

$.ajax({
    url: spreadUrl,
    jsonp: 'doData',
    dataType: 'jsonp'
});



</script> 
</BODY>

</HTML>

 
